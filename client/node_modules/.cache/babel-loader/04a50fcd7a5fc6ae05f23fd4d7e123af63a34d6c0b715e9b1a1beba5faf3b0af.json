{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gaiko/Code/newCode/finalchemy/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gaiko/Code/newCode/finalchemy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gaiko/Code/newCode/finalchemy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Auth.css';import React,{useRef,useState}from\"react\";import{useNavigate}from'react-router-dom';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Auth(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var inputRef=useRef(null);var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),updated=_useState4[0],setUpdated=_useState4[1];var navigate=useNavigate();var handleClick=function handleClick(){setUpdated(inputRef.current.value);};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:handleClick();_context.prev=1;_context.next=4;return axios.post('/api/check_token/',{\"TOKEN\":token});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setResult(data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:console.log(result);if(result===true){localStorage.setItem(\"token\",token);navigate('/home');}case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"menuPart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logoText\",children:\"\\u0424\\u0438\\u043D\\u0430\\u043D\\u0441\\u043E\\u0432\\u0430\\u044F \\u0430\\u043B\\u0445\\u0438\\u043C\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"lowText\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"depositInput\",ref:inputRef,type:\"num\",id:\"message\",name:\"message\"}),/*#__PURE__*/_jsx(\"button\",{className:\"acceptButton\",onClick:function onClick(){return fetchData(updated);},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})});}export default Auth;","map":{"version":3,"names":["React","useRef","useState","useNavigate","axios","Auth","result","setResult","inputRef","updated","setUpdated","navigate","handleClick","current","value","fetchData","token","post","data","console","log","localStorage","setItem"],"sources":["/Users/gaiko/Code/newCode/finalchemy/client/src/components/auth/Auth.jsx"],"sourcesContent":["import './Auth.css';\nimport React, {useRef, useState} from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport axios from \"axios\";\n\nfunction Auth() {\n    const [result, setResult] = useState([])\n\n    const inputRef = useRef(null);\n    const [updated, setUpdated] = useState('');\n    \n    const navigate = useNavigate()\n\n    const handleClick = () => {\n        setUpdated(inputRef.current.value);\n    };\n\n    const fetchData = async(token) => {\n        handleClick()\n        try{\n            const {data} = await axios.post('/api/check_token/', {\n                \"TOKEN\": token\n            })\n            setResult(data)\n\n        } catch(error) {\n            console.log(error)\n        }\n        console.log(result)\n        if (result === true){\n            localStorage.setItem(\"token\", token)\n            navigate('/home')\n        }\n        \n    }\n\n    return (\n        <div>\n            <div className='menuPart'>\n                <div className='logoText'>Финансовая алхимия</div>\n\n                <div className='lowText'>Авторизация</div>\n                <input className='depositInput' ref={inputRef} type=\"num\" id=\"message\" name=\"message\" />\n\n                <button className='acceptButton' onClick={() => fetchData(updated)}>Войти</button>\n            </div>\n        </div>\n    );\n}\n\nexport default Auth;\n"],"mappings":"mZAAA,MAAO,YAAY,CACnB,MAAOA,MAAK,EAAGC,MAAM,CAAEC,QAAQ,KAAO,OAAO,CAC7C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,MAAK,KAAM,OAAO,CAAC,wFAE1B,QAASC,KAAI,EAAG,CACZ,cAA4BH,QAAQ,CAAC,EAAE,CAAC,wCAAjCI,MAAM,eAAEC,SAAS,eAExB,GAAMC,SAAQ,CAAGP,MAAM,CAAC,IAAI,CAAC,CAC7B,eAA8BC,QAAQ,CAAC,EAAE,CAAC,yCAAnCO,OAAO,eAAEC,UAAU,eAE1B,GAAMC,SAAQ,CAAGR,WAAW,EAAE,CAE9B,GAAMS,YAAW,CAAG,QAAdA,YAAW,EAAS,CACtBF,UAAU,CAACF,QAAQ,CAACK,OAAO,CAACC,KAAK,CAAC,CACtC,CAAC,CAED,GAAMC,UAAS,4FAAG,iBAAMC,KAAK,+IACzBJ,WAAW,EAAE,uCAEYR,MAAK,CAACa,IAAI,CAAC,mBAAmB,CAAE,CACjD,OAAO,CAAED,KACb,CAAC,CAAC,wCAFKE,IAAI,mBAAJA,IAAI,CAGXX,SAAS,CAACW,IAAI,CAAC,gFAGfC,OAAO,CAACC,GAAG,aAAO,SAEtBD,OAAO,CAACC,GAAG,CAACd,MAAM,CAAC,CACnB,GAAIA,MAAM,GAAK,IAAI,CAAC,CAChBe,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEN,KAAK,CAAC,CACpCL,QAAQ,CAAC,OAAO,CAAC,CACrB,CAAC,oEAEJ,kBAjBKI,UAAS,4CAiBd,CAED,mBACI,kCACI,aAAK,SAAS,CAAC,UAAU,wBACrB,YAAK,SAAS,CAAC,UAAU,qHAAyB,cAElD,YAAK,SAAS,CAAC,SAAS,gFAAkB,cAC1C,cAAO,SAAS,CAAC,cAAc,CAAC,GAAG,CAAEP,QAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,EAAG,cAExF,eAAQ,SAAS,CAAC,cAAc,CAAC,OAAO,CAAE,yBAAMO,UAAS,CAACN,OAAO,CAAC,EAAC,4CAAe,GAChF,EACJ,CAEd,CAEA,cAAeJ,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}